{"version":3,"file":"static/webpack/static/development/pages/home.js.46ca5885a7dc9b1a640a.hot-update.js","sources":["webpack:///./pages/home.js"],"sourcesContent":["import fetch from 'isomorphic-unfetch';\nimport Layout from '../comps/Layout';\nimport Router from 'next/router';\nimport absoluteUrl from \"next-absolute-url\";\nimport url from \"url\";\nimport Profile from '../comps/profile';\nimport Header from '../comps/header';\nimport SideBar from '../comps/sideBar';\nimport Footer from '../comps/footer';\n\n\n\n\n// let awsinstance = 'http://ec2-18-191-11-49.us-east-2.compute.amazonaws.com'; //Jon\nlet awsinstance = 'http://ec2-18-234-109-238.compute-1.amazonaws.com'; //Joes\n\nconst homeStyle ={\n  position: \"absolute\",\n  background: \"url('/12.png') no-repeat center fixed\",\n  backgroundSize: \"cover\",\n  left: \"0\",\n  top: \"0\",\n  right: \"0\",\n  height: \"100%\",\n  width: \"100%\"\n}\n\nconst Home = (props) => (\n  <div style={homeStyle}>\n\t<Header className=\"homeHeader\"/>\n  <ul className =\"mainProfileBox\">\n  <img className=\"profileImage\" src={props.data.image} alt=\"profileimage\"/>\n  <img className=\"artistImage\" src={props.data.topArtistUrl} alt=\"profileimage\"/>\n  <li className=\"homeProfile\" ><Profile {...props} /></li>\n  <li className = \"sideBarProfile\" ><SideBar {...props}></SideBar></li>\n  </ul>\n  <Footer className=\"homeFooter\"/>\n  <style jsx>{`\n  .profileImage{\n    position: absolute;\n    top: 50px;\n    left: 0px;\n    max-width: calc( 75vw /2 );\n    max-height: 35vh;\n  }\n  .artistImage{\n    position: absolute;\n    top: 50px;\n    right: 25%;\n    max-width: calc( 75vw /2 );\n    max-height: 35vh;\n  }\n  .mainProfileBox{\n    max-width: 75%;\n    margin:0;\n    list-style-type: none;\n  }\n  .homeHeader{\n    margin:0;\n    position:fixed;\n  }\n  .homeProfile{\n    margin:0;\n    display: inline-block;\n  }\n  .sideBarProfile{\n    display: inline-block;\n    width: 25%;\n    position:fixed;\n    right: 0;\n    top: 51px;\n    padding:0;\n  }\n  .homefooter{\n    position: fixed;\n    left: 0px;\n    bottom: 0px;\n    width:100vw;\n  }\n  `}\n  </style>\n  </div>\n);\nlet count = 0;\nlet accessToken;\nlet username;\nHome.getInitialProps = async function(req){\n  let code = req.query.code;\n  let image;\n  let topTracks;\n  let topArtist;\n  let topArtistImage;\n  let allPlaylists;\n  if (count == 0){\n  const res = await fetch(awsinstance+':3456/getCode?code='+code);\n  const data = await res.json();\n  accessToken=data.accessToken; \n  username = data.username;\n}\n\n  const result = await fetch(awsinstance+':3456/getData?token='+accessToken+'&username='+username);\n  const dataAll = await result.json();\n  const result2 = await fetch(awsinstance+':3456/getOtherUsers?token='+accessToken+'&username='+username);\n  const allUsers = await result2.json();\n  // const ratingsData = await fetch(awsinstance+':3456/getRatings?token='+accessToken+'&username='+username);\n  // const ratings = await ratingsData.json();\n  let sum=0;\n\n  let playlistObject=[];\n  JSON.parse(dataAll[0].playlists).forEach((playlist,index)=>{\n    // console.log(playlist);\n    // sum = sum +ratings[index].rating;\n    // playlistObject.push({playlist: playlist, rating: ratings[index].rating});\n    playlistObject.push({playlist: playlist, accessToken: accessToken});\n  });\n\n\n\n  return{data: {\n    image: dataAll[0].image,\n    topArtistUrl: dataAll[0].topArtistUrl,\n    topTracks: JSON.parse(dataAll[0].topTracks).items,\n    allUsers: allUsers,\n    accessToken: accessToken,\n    // allPlaylists: JSON.parse(dataAll[0].playlists),\n    allPlaylists: playlistObject,\n    user: username,\n    totalLikes: sum\n  }};\n}\nexport default Home;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AACA;AAUA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AARA;AAAA;AAAA;AADA;AACA;AAuDA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAQA;AARA;AAAA;AACA;AADA;AASA;AACA;AACA;AACA;AAZA;AAAA;AAAA;AACA;AADA;AAcA;AAdA;AAAA;AACA;AADA;AAeA;AAfA;AAAA;AACA;AADA;AAgBA;AAhBA;AAAA;AACA;AADA;AAiBA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AA5BA;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;AACA;AAjCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AA2CA;;;;A","sourceRoot":""}